[build]
  command = "NITRO_PRESET=netlify npm run build"
  publish = "dist"

[functions]
  node_bundler = "esbuild"

# --- WordPress leftovers ---
[[redirects]]
  from = "/wp-includes/*"
  to = "/404.html"
  status = 404

[[redirects]]
  from = "/wp-admin/*"
  to = "/404.html"
  status = 404

[[redirects]]
  from = "/wp-content/*"
  to = "/404.html"
  status = 404

[[redirects]]
  from = "/xmlrpc.php"
  to = "/404.html"
  status = 404

[[redirects]]
  from = "/wlwmanifest.xml"
  to = "/404.html"
  status = 404

[[redirects]]
  from = "/license.txt"
  to = "/404.html"
  status = 404

[[redirects]]
  from = "/wp-login.php"
  to = "/404.html"
  status = 404

# --- Common file scans / exploits ---
[[redirects]]; extensions block
  from = "/*.{php,asp,aspx,bak,env,sql,log,old,swp}"
  to = "/404.html"
  status = 404

# --- Dot folders ---
[[redirects]]
  from = "/.git/*"
  to = "/404.html"
  status = 404

[[redirects]]
  from = "/.svn/*"
  to = "/404.html"
  status = 404

# --- Misc scans and misformatted links ---
[[redirects]]; buckets of noisy paths
  from = "/feed"
  to = "/404.html"
  status = 404

[[redirects]]; add more of your 404 patterns as needed
  from = "/{admin,login,signup,register,config,tmp}/*"
  to = "/404.html"
  status = 404

[[redirects]]
  from = "/phpmyadmin/*"
  to = "/404.html"
  status = 404

[[redirects]]
  from = "/pma/*"
  to = "/404.html"
  status = 404

[[redirects]]
  from = "/solr/*"
  to = "/404.html"
  status = 404

[[redirects]]
  from = "/cgi-bin/*"
  to = "/404.html"
  status = 404

[[redirects]]
  from = "/shell/*"
  to = "/404.html"
  status = 404

[[redirects]]
  from = "/adminer/*"
  to = "/404.html"
  status = 404

# --- Catch-all: hand everything else to the Nuxt server function ---
[[redirects]]
  from = "/*"
  to = "/.netlify/functions/server"
  status = 200
